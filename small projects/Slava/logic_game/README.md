# Игра Логика
Игра Логика должна развивать детей и их понимания логических операций. 
В этой игре есть:

 - Кнопки, которые нажимает игрок
 - Блоки логических операций, которые зажигаются при выполнении условии от сигналов посланных Игроком
 - Алмазик. Если игрок доставит его в целости и сохранности, то игра будет выиграна.
 - Платформы, на которых лежит алмазик. Если алмазик пролетит слишком долго, то он разбивается и game over. 

## Файловая структура

 - main.c - точка входа в программу
 - controls.c - функции управления с джойстика
 - eventUpdate.c - функции обновления состояния элементов
 - logic.h - связующая библиотека, хранящая глобальные переменные и массивы
## logic.h

`enum types` - типы элементов уровня (начинается с 0)

`enum pipesAnim` - кадры анимации труб (начинается с 1)

`typedef  struct T_LvlObj` - определяем структуру, как новый тип для создания массива. Она содержит переменные, которые могут использоваться различно, завися от типа элемента

`extern  T_LvlObj  Level[]` - объявляем массив из структур. Определяем его в `main.c`

Далее идут переменные тестового колобка

`extern  bool  isStarted;` - переменная, которая определяет, началась ли уже игра

`extern u16 index_BTN[]; ...
extern u16 index_PLATFORM[];` - Массивы, индексирующие типы объектов в `levelObjCreate()` и `levelObjIndex()` в `main.c` для их последующего обновления в `eventUpdate.c`

Далее идут объявления глобальных функций

## main.c
`T_LvlObj  Level[]` - определяем массив из структур, который мы объявляли в `logic.h`

Далее идут определения других глобальных перемен, которые мы ранее объявляли в `logic.h`

`void  checkNull(void* ptr)` - проверяет, хватает ли нам памяти для динамического массива. Либо возвращает указатель, либо выходит с кодом `37`

`void  levelObjCreate()` - функция по созданию объектов. Вместе с тем считает кол-во типов объектов в массиве и создаёт динамический массив, в котором будут индексироваться типы объектов. Вызывается в `Start()`

`void  levelObjIndex()` - функция по индексированию типов объектов. Находит тип объекта и записывает его индекс в ячейку соответствующего индексирующего массива. Вызывается в `Start()`

`void Start()` - функция, которая начинает игру. Вызывается в `handleInput()` в `controls.c`

`int main(bool hard)` - главная функция. Принимает значения hard reset'а

## controls.c
`void handleInput(u16 joy,u16 changed, u16 state)` - функция перехвата управления с джойстика. 
Принимает значения `joy` - номер джойстика, `changed` - состояние смены нажатой кнопки, `state` - состояние самого нажатия на кнопки.
Вызывается привязкой её к нажатиям кнопок в `main.c`
Отвечает за старт игры и вызов функции `eventUpdate()`

## eventUpdate.c
`void  eventUpdate()` - функция обновления логики и состояния элементов. Вызывается на каждое обновление `eventUpdate()`. Использует массив объектов уровня (`Level[]`) и проиндексированные массивы объектов (`index_TYPE`) 